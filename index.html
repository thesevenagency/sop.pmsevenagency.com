<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Seven Agency - Interactive SOP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:opsz,wght@6..96,400;6..96,500;6..96,600;6..96,700&display=swap" rel="stylesheet">
    <!-- 
        Chosen Palette: Brand Standards (Deep Blue, Light Blue, Soft Background, Powder Pink)
        Application Structure Plan: A role-based and task-based single-page application. The structure prioritizes usability over mirroring the original document's chapters. Key features include a 'Quick Access' dashboard, an interactive 'Event Lifecycle' timeline, and filterable 'Vendor Standards'. This design allows users, like Project Managers or vendors, to find critical information relevant to their immediate tasks (e.g., "What's the booking process?") without navigating a linear document. The interactive timeline and vendor filter are specifically designed to make complex processes and specific standards digestible and quickly accessible, which is crucial in a fast-paced event environment.
        Visualization & Content Choices: 
        - Goal: Organize Process -> Viz: Interactive Timeline & Image-based Flowchart. Interaction: Clickable tabs reveal stage-specific rules. Justification: Chronological flow is more intuitive for event planning than a simple list of rules. The PO flowchart visual makes the anti-fraud protocol unambiguous. Method: Custom HTML/CSS/JS with image modals.
        - Goal: Quick Information Retrieval -> Viz: Filterable Content Blocks. Interaction: A dropdown menu for vendor standards and a text input for search. Justification: Allows users to instantly isolate the exact information they need, drastically improving efficiency over manual searching. Method: JS data object and filtering logic.
        - Goal: Inform/Compare -> Viz: Styled HTML tables and cards. Interaction: Static display for clarity. Justification: Used for presenting clear-cut information like sanctions or role responsibilities where complex interaction is unnecessary. Method: Tailwind CSS.
        - Goal: Visual Clarification -> Viz: Image Modals. Interaction: Click a button to show a reference image in a popup. Justification: Adds visual context to text-based standards like uniforms or decor quality without cluttering the main UI. Method: HTML/CSS/JS for modal.
        CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->
    <style>
        body {
            font-family: 'Bodoni Moda', serif;
            background-color: #f5f1e6; /* Soft Background */
            color: #2e3853; /* Deep Blue */
        }
        .active-nav {
            color: #2e3853; 
            border-bottom-color: #acbae0; /* Light Blue */
        }
        .active-tab {
             background-color: #acbae0; /* Light Blue */
             color: #2e3853;
             transform: translateY(-2px);
             box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .highlight {
            color: #acbae0; /* Light Blue */
        }
        .card-bg {
            background-color: #ffffff; /* Changed from Powder Pink for readability */
            border: 1px solid #dbcac0; /* Kept Powder Pink as border */
        }
         .button-primary {
            background-color: #acbae0; /* Light Blue */
            color: #2e3853;
            transition: all 0.2s ease-in-out;
         }
         .button-primary:hover {
            background-color: #98a9d1;
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
         }
         .nav-link {
            transition: all 0.2s ease-in-out;
         }
         .nav-link:hover {
            color: #2e3853;
            transform: translateY(-2px);
         }
         .lifecycle-tab {
            transition: all 0.2s ease-in-out;
         }
         .card-interactive {
            transition: all 0.2s ease-in-out;
         }
         .card-interactive:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
         }
    </style>
</head>
<body class="">

    <header class="bg-[#f5f1e6]/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <!-- LOGO REPLACEMENT: Replace the span below with: <img src="logo_top.svg" alt="The Seven Agency Logo" class="h-10 w-auto"> -->
                    <span class="text-xl font-bold">The Seven Agency SOP</span>
                </div>
                <div class="hidden md:block">
                    <nav id="desktop-nav" class="flex items-center space-x-4">
                        <a href="#roles" class="nav-link px-3 py-2 rounded-md text-sm font-medium border-b-2 border-transparent">Team & Roles</a>
                        <a href="#conduct" class="nav-link px-3 py-2 rounded-md text-sm font-medium border-b-2 border-transparent">Code of Conduct</a>
                        <a href="#lifecycle" class="nav-link px-3 py-2 rounded-md text-sm font-medium border-b-2 border-transparent">Event Lifecycle</a>
                        <a href="#vendors" class="nav-link px-3 py-2 rounded-md text-sm font-medium border-b-2 border-transparent">Vendor Standards</a>
                        <a href="#sanctions" class="nav-link px-3 py-2 rounded-md text-sm font-medium border-b-2 border-transparent">Sanctions</a>
                    </nav>
                </div>
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="inline-flex items-center justify-center p-2 rounded-md focus:outline-none">
                        <svg class="h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
         <div id="mobile-menu" class="md:hidden hidden">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#roles" class="block px-3 py-2 rounded-md text-base font-medium">Team & Roles</a>
                <a href="#conduct" class="block px-3 py-2 rounded-md text-base font-medium">Code of Conduct</a>
                <a href="#lifecycle" class="block px-3 py-2 rounded-md text-base font-medium">Event Lifecycle</a>
                <a href="#vendors" class="block px-3 py-2 rounded-md text-base font-medium">Vendor Standards</a>
                <a href="#sanctions" class="block px-3 py-2 rounded-md text-base font-medium">Sanctions</a>
            </div>
        </div>
    </header>

    <main class="container mx-auto p-4 sm:p-6 lg:p-8">
        
        <section id="dashboard" class="text-center mb-16">
            <h1 class="text-4xl md:text-5xl font-bold mb-4">Interactive Standard Operating Procedure</h1>
            <p class="text-lg max-w-3xl mx-auto">Your quick-access guide to flawless event execution. Find what you need, when you need it.</p>
             <div class="mt-8">
                <input id="search-bar" type="text" placeholder="Search for a rule or topic (e.g., 'uniform', 'payment')..." class="w-full max-w-xl p-3 border border-[#dbcac0] rounded-lg shadow-sm focus:ring-2 focus:ring-[#acbae0] focus:border-[#acbae0] transition bg-white">
            </div>
        </section>

        <div id="search-results" class="hidden mb-12"></div>

        <div id="main-content">
            <section id="roles" class="mb-16 scroll-mt-20">
                <h2 class="text-3xl font-bold mb-8">Chapter 1: Our Team: Roles & Responsibilities</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Roles will be inserted here by JS -->
                </div>
            </section>

            <section id="conduct" class="mb-16 scroll-mt-20">
                <h2 class="text-3xl font-bold mb-8">Chapter 2: The Code of Conduct</h2>
                <div class="space-y-8">
                    <!-- Code of Conduct sections will be inserted here by JS -->
                </div>
            </section>

            <section id="lifecycle" class="mb-16 scroll-mt-20">
                <h2 class="text-3xl font-bold mb-8">Chapter 3: The Event Lifecycle</h2>
                 <div class="flex flex-wrap justify-center gap-2 mb-8 border-b border-[#dbcac0] pb-4">
                    <button data-tab="booking" class="lifecycle-tab px-4 py-2 text-sm font-semibold rounded-lg hover:bg-[#f5f1e6] hover:shadow-md hover:-translate-y-0.5">Booking & Financial Protocol</button>
                    <button data-tab="preparation" class="lifecycle-tab px-4 py-2 text-sm font-semibold rounded-lg hover:bg-[#f5f1e6] hover:shadow-md hover:-translate-y-0.5">Pre-Event Preparation</button>
                    <button data-tab="operations" class="lifecycle-tab px-4 py-2 text-sm font-semibold rounded-lg hover:bg-[#f5f1e6] hover:shadow-md hover:-translate-y-0.5">On-the-Day Operations</button>
                </div>
                <div id="lifecycle-content" class="bg-white border border-[#dbcac0] p-6 rounded-lg shadow-lg">
                    <!-- Lifecycle content will be inserted here -->
                </div>
            </section>

            <section id="vendors" class="mb-16 scroll-mt-20">
                <h2 class="text-3xl font-bold mb-8">Chapter 4: Vendor-Specific Quality Standards</h2>
                <div class="mb-6">
                    <select id="vendor-filter" class="w-full max-w-md p-3 border border-[#dbcac0] rounded-lg shadow-sm focus:ring-2 focus:ring-[#acbae0] focus:border-[#acbae0] transition bg-white">
                        <option value="all">Show All Vendors</option>
                        <option value="photo_video">Photo & Video</option>
                        <option value="decor">Florist, Decorations & Furniture</option>
                        <option value="catering">Catering & Bar</option>
                        <option value="makeup">Makeup & Hair</option>
                    </select>
                </div>
                <div id="vendor-content" class="space-y-8">
                     <!-- Vendor standards will be inserted here by JS -->
                </div>
            </section>

            <section id="sanctions" class="mb-16 scroll-mt-20">
                 <h2 class="text-3xl font-bold mb-8">Chapter 5: Sanctions & Enforcement</h2>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                     <!-- Sanctions content will be inserted here by JS -->
                 </div>
            </section>
        </div>
    </main>

    <!-- Modal Structure -->
    <div id="image-modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-white p-4 rounded-lg shadow-2xl max-w-3xl max-h-[90vh] relative">
            <button id="close-modal" class="absolute -top-3 -right-3 bg-white rounded-full p-1 text-gray-700 hover:text-red-500 transition">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <img id="modal-image" src="" alt="Visual Reference" class="max-w-full max-h-[80vh] object-contain rounded">
        </div>
    </div>
    
    <footer class="bg-[#2e3853] text-white mt-16">
        <div class="container mx-auto py-6 px-4 sm:px-6 lg:px-8 text-center text-sm">
            <p>&copy; 2025 The Seven Agency. All Rights Reserved.</p>
            <p>Version 2.3 (Last Updated: June 30, 2025)</p>
        </div>
    </footer>

    <script>
        const sopData = {
            roles: [
                { title: "Project Manager (PM)", content: "The overall leader and main point of contact for the entire event. Responsible for the entire project lifecycle, from initial vendor booking to final event execution and reporting. Coordinates all team members and vendors. The primary problem-solver for any on-site issues. Ensures the entire event adheres to this SOP." },
                { title: "Meeting Manager (MM)", content: "Conducts the pre-wedding meeting with clients upon their arrival in Bali. Responsible for finalizing all event details, preferences, and special requests with the client. Updates the official Wedding Report (WR) file with all final information, which serves as a key document for the PM's execution plan." },
                { title: "Client Manager (CM) / Personal Butler", content: "Provides exceptionally personalized assistance to the couple throughout the wedding day. Acts as the couple's primary point of contact for personal needs, helping to manage their schedule and keep them comfortable and stress-free. For the duration of the event, the CM is assigned as the **Area Manager** for Photography and Videography, ensuring those vendors meet our quality standards." },
                { title: "Event Assistants", content: "Support the PM and CM in various capacities. Assist with setup, coordination, guest management, and ensuring the smooth flow of the event as directed by the PM." },
                { title: "'Area Manager' (AM) Designation", content: "An 'Area Manager' is not a permanent job title but a temporary designation assigned by the PM for a specific event. The PM will assign team members to be the AM for key areas (e.g., Catering, Entertainment, Decorations). The assigned AM is responsible for overseeing their specific area and ensuring the vendors involved meet the quality standards outlined in this SOP." }
            ],
            conduct: [
                {
                    title: "2.1. Team Uniform Guide",
                    icon: `<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 highlight" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>`,
                    image: 'http://googleusercontent.com/image_generation_content/2',
                    content: `
                        <p>All team members must adhere to the professional uniform standards to present a cohesive and polished image to our clients. Click the button below for visual examples.</p>
                        <ul class="list-disc list-inside space-y-1 mt-4">
                            <li><strong>Key Combinations:</strong> All-black attire, or a white shirt paired with black pants/skirt.</li>
                            <li><strong>Semi-Formal Events:</strong> Company t-shirts may be approved by the PM for ceremony-only events.</li>
                        </ul>`
                },
                {
                    title: "2.2. Approved Headwear",
                    icon: `<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 highlight" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M6.16667 3.91667C6.16667 3.41472 6.56472 3.01667 7.06667 3.01667H16.9333C17.4353 3.01667 17.8333 3.41472 17.8333 3.91667V10.7185C17.8333 11.2335 17.7556 11.7454 17.6042 12.2361L15.8333 18.0833H8.16667L6.39583 12.2361C6.24444 11.7454 6.16667 11.2335 6.16667 10.7185V3.91667Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M6.16669 10.5166H17.8334" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>`,
                    image: 'http://googleusercontent.com/image_generation_content/3',
                    content: `
                        <p>Only approved, professional headwear is permitted. Sport caps are not allowed. Click the button below for visual examples of the approved hat styles.</p>`
                },
                {
                    title: "2.3. Attitude & Behaviour",
                    icon: `<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 highlight" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>`,
                    content: `
                        <p class="font-semibold mb-2">Professionalism:</p>
                         <ul class="list-disc list-inside space-y-1 mb-4">
                            <li>Be friendly, positive, and solution-oriented.</li>
                            <li>Do not speak loudly. Never discuss personal matters or joke inappropriately within earshot of clients.</li>
                            <li>Move with purpose. Never say "it's not my job." We work as a team.</li>
                         </ul>
                        <p class="font-semibold mb-2">Restrictions:</p>
                         <ul class="list-disc list-inside space-y-1">
                            <li><strong>NO ALCOHOL.</strong> Consumption during working hours is strictly forbidden.</li>
                            <li><strong>NO SMOKING</strong> in any client-facing areas. Permitted only in designated staff areas during breaks.</li>
                            <li>Resting and eating must occur only in "back-of-house" areas.</li>
                            <li>Eating food prepared for the client/guests is strictly forbidden.</li>
                        </ul>`
                },
                {
                    title: "2.4. Financial Integrity & Anti-Fraud Policy",
                    icon: `<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>`,
                    content: `
                        <p class="font-bold text-red-600 mb-2">This is a zero-tolerance policy.</p>
                        <ul class="list-disc list-inside space-y-2">
                             <li>All financial matters, including vendor bookings and payments, <strong>must</strong> be handled exclusively through official company channels.</li>
                             <li>Attempting to arrange side-deals, solicit or accept direct cash payments, or otherwise circumvent company financial protocols is strictly prohibited.</li>
                             <li class="font-semibold">Violation of this policy will result in immediate removal from the event, termination of contract/employment, and potential legal action.</li>
                         </ul>`
                },
            ],
            lifecycle: {
                booking: {
                    title: "Booking & Financial Protocol",
                    content: `
                        <div class="space-y-6">
                           <div>
                                <h4 class="text-xl font-bold mb-3">3.1. The Purchase Order (PO) System</h4>
                                <p class="mb-4 text-red-600 font-semibold">No booking can be made without an approved Purchase Order (PO).</p>
                                 <button data-img-src="http://googleusercontent.com/image_generation_content/6" class="visual-ref-btn w-full mb-4">
                                     <img src="http://googleusercontent.com/image_generation_content/6" alt="Purchase Order Flowchart" class="w-full h-auto rounded-lg shadow-md border border-[#dbcac0]">
                                 </button>
                                 <p class="text-center text-sm opacity-75">Click image to enlarge</p>
                           </div>
                           <div>
                                <h4 class="text-xl font-bold mb-3">3.2. Official Booking Procedure</h4>
                                <ol class="list-decimal list-inside space-y-2">
                                    <li><strong>Email is the Only Channel:</strong> All bookings must be initiated via <strong>7agency.bookings@gmail.com</strong>.</li>
                                    <li><strong>PO Attachment:</strong> The approved and numbered PO **must** be attached to the initial booking email.</li>
                                    <li><strong>Vendor Confirmation:</strong> The vendor must reply to the official email to confirm acceptance.</li>
                                </ol>
                            </div>
                        </div>`
                },
                preparation: {
                    title: "Pre-Event Preparation",
                    content: `
                        <div class="space-y-6">
                            <div>
                                <h4 class="text-xl font-bold mb-2">Ceremony Processional Order</h4>
                                <p class="mb-4">This diagram shows the standard walking order for the wedding party. It must be reviewed before the technical meeting and rehearsal.</p>
                                <button data-img-src="http://googleusercontent.com/image_generation_content/5" class="visual-ref-btn w-full">
                                    <img src="http://googleusercontent.com/image_generation_content/5" alt="Ceremony Processional Order" class="w-full h-auto rounded-lg shadow-md border border-[#dbcac0]">
                                </button>
                                <p class="text-center text-sm opacity-75 mt-2">Click image to enlarge</p>
                            </div>
                            <div>
                                <h4 class="text-xl font-bold mb-2">Technical Meetings & Rundown</h4>
                                <p>For all large events, a technical meeting with all key vendors is mandatory. The final rundown and layout must be distributed to all teams at least 72 hours before the event.</p>
                            </div>
                        </div>`
                },
                operations: {
                    title: "On-the-Day Operations",
                    content: `
                        <div class="space-y-4">
                            <div>
                                <h4 class="text-xl font-bold mb-2">Client Arrival</h4>
                                <ul class="list-disc list-inside space-y-1">
                                    <li>The venue must be 100% ready <strong>before</strong> the client arrives. No last-minute setup should be visible.</li>
                                    <li>The uniformed team should be organized and ready to welcome the couple warmly.</li>
                                    <li>The CM or PM will give the team a 5-minute arrival warning via walkie-talkie.</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="text-xl font-bold mb-2">Briefings</h4>
                                 <ul class="list-disc list-inside space-y-1">
                                    <li><strong>Team Briefing:</strong> The PM will conduct a brief meeting with the entire on-site team before the event begins.</li>
                                    <li><strong>Client Briefing:</strong> The CM or PM will conduct a brief (approx. 3 minutes) briefing with the couple and their wedding party.</li>
                                </ul>
                            </div>
                        </div>`
                }
            },
            vendors: [
                { id: "photo_video", title: "Photo & Video", content: `
                    <ul class="list-disc list-inside space-y-2">
                        <li><strong>Arrival:</strong> Punctuality is mandatory. Arrive with sufficient time to be fully set up and ready to begin work precisely at the contracted start time.</li>
                        <li><strong>Shot List:</strong> Must capture all key moments and details as outlined in the "Standard Shot List" (see Appendix).</li>
                        <li><strong>Client Direction:</strong> Proactively direct the couple and guests to ensure the best possible shots.</li>
                        <li><strong>Deliverables:</strong> Editing process cannot exceed 2-4 weeks. Deliverables are for <strong>edited files only</strong>. Final files delivered via cloud link to the PM and MM.</li>
                    </ul>` },
                { id: "decor", title: "Florist, Decorations & Furniture", content: `
                     <ul class="list-disc list-inside space-y-2">
                        <li><strong>Readiness:</strong> All decor and furniture must be completely set up at least 30 minutes before the ceremony start time.</li>
                        <li><strong>Quality:</strong> Final setup must <strong>exactly match</strong> the client's approved design. All flowers must be fresh. All furniture must be clean and undamaged.</li>
                        <li><strong>Discretion:</strong> Vendor teams should be out of sight before the client's arrival.</li>
                    </ul>` },
                { id: "catering", title: "Catering & Bar", content: `
                     <ul class="list-disc list-inside space-y-2">
                        <li><strong>Readiness:</strong> Bar and food stations must be fully set up and staffed 30 minutes before scheduled service time.</li>
                        <li><strong>Quality:</strong> Menu must exactly match the client's order. For "free flow" packages, ensuring adequate stock is the vendor's responsibility; running out is a service failure.</li>
                     </ul>` },
                { id: "makeup", title: "Makeup & Hair", image: 'http://googleusercontent.com/image_generation_content/8', content: `
                     <ul class="list-disc list-inside space-y-2">
                        <li><strong>Arrival:</strong> Arrive at the client's location at least 15 minutes prior to the scheduled start time. The makeup artist must share their live location with the Project Manager and client while en route.</li>
                        <li><strong>Hygiene:</strong> All tools must be clean and sanitized. A face mask must be worn while working. Click the button below for a visual reference.</li>
                        <li><strong>Quality:</strong> The final look must match the client's approved trial/inspiration photos. Use high-quality, professional products.</li>
                    </ul>` }
            ],
            sanctions: [
                 { title: "For Internal Team Members", content: `
                    <ol class="list-decimal list-inside space-y-2">
                        <li><strong>First Violation:</strong> A formal written warning from the HPM.</li>
                        <li><strong>Second Violation:</strong> The team member will not receive payment for the event in question.</li>
                        <li><strong>Third Violation:</strong> Immediate review for termination of employment.</li>
                    </ol>` },
                { title: "For External Vendors", content: `
                    <ol class="list-decimal list-inside space-y-2">
                        <li><strong>First Violation:</strong> A formal written warning from the Development Manager.</li>
                        <li><strong>Second Violation:</strong> The vendor will not receive payment for the event. A meeting with the DM is required.</li>
                        <li><strong>Third Violation:</strong> Permanently removed from the "Appointed Vendor List."</li>
                    </ol>` }
            ]
        };

        document.addEventListener('DOMContentLoaded', function() {
            const imageModal = document.getElementById('image-modal');
            const modalImage = document.getElementById('modal-image');
            const closeModalButton = document.getElementById('close-modal');

            function openModal(imageUrl) {
                modalImage.src = imageUrl;
                imageModal.classList.remove('hidden');
            }

            function closeModal() {
                imageModal.classList.add('hidden');
                modalImage.src = '';
            }

            closeModalButton.addEventListener('click', closeModal);
            imageModal.addEventListener('click', (e) => {
                if (e.target === imageModal) {
                    closeModal();
                }
            });

            const rolesContainer = document.querySelector('#roles .grid');
            sopData.roles.forEach(role => {
                const card = document.createElement('div');
                card.className = 'card-bg card-interactive p-6 rounded-lg shadow-md';
                card.innerHTML = `
                    <h3 class="text-xl font-bold mb-3">${role.title}</h3>
                    <p>${role.content}</p>
                `;
                rolesContainer.appendChild(card);
            });

            const conductContainer = document.querySelector('#conduct .space-y-8');
            sopData.conduct.forEach(item => {
                const section = document.createElement('div');
                section.className = 'card-bg card-interactive p-6 rounded-lg shadow-md';
                let imageButton = '';
                if(item.image) {
                     imageButton = `<button data-img-src="${item.image}" class="visual-ref-btn mt-4 inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md shadow-sm button-primary">Show Visual Reference</button>`;
                }
                section.innerHTML = `
                    <div class="flex items-start space-x-4">
                        <div class="flex-shrink-0">${item.icon}</div>
                        <div>
                            <h3 class="text-xl font-bold mb-3">${item.title}</h3>
                            <div class="space-y-2">${item.content}</div>
                            ${imageButton}
                        </div>
                    </div>
                `;
                conductContainer.appendChild(section);
            });
            
            const vendorContentContainer = document.getElementById('vendor-content');
            sopData.vendors.forEach(vendor => {
                 const card = document.createElement('div');
                 card.id = `vendor-${vendor.id}`;
                 card.className = 'vendor-card card-bg card-interactive p-6 rounded-lg shadow-md';
                 let imageButton = '';
                 if (vendor.image) {
                    imageButton = `<button data-img-src="${vendor.image}" class="visual-ref-btn mt-4 inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md shadow-sm button-primary">Show Visual Reference</button>`;
                 }
                 card.innerHTML = `
                    <h3 class="text-xl font-bold mb-3">${vendor.title}</h3>
                    <div class="space-y-2">${vendor.content}</div>
                    ${imageButton}
                 `;
                 vendorContentContainer.appendChild(card);
            });
            
            document.body.addEventListener('click', function(e) {
                const button = e.target.closest('.visual-ref-btn');
                if (button) {
                    openModal(button.dataset.imgSrc);
                }
            });

            const vendorFilter = document.getElementById('vendor-filter');
            vendorFilter.addEventListener('change', (e) => {
                const selectedValue = e.target.value;
                const allVendorCards = document.querySelectorAll('.vendor-card');
                allVendorCards.forEach(card => {
                    if (selectedValue === 'all' || card.id === `vendor-${selectedValue}`) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });

            const sanctionsContainer = document.querySelector('#sanctions .grid');
            sopData.sanctions.forEach(sanc => {
                const card = document.createElement('div');
                card.className = 'card-bg p-6 rounded-lg shadow-md border-l-4 border-[#acbae0]';
                card.innerHTML = `
                    <h3 class="text-xl font-bold mb-3">${sanc.title}</h3>
                    <div class="">${sanc.content}</div>
                `;
                sanctionsContainer.appendChild(card);
            });

            const lifecycleContent = document.getElementById('lifecycle-content');
            const lifecycleTabs = document.querySelectorAll('.lifecycle-tab');
            
            function showLifecycleContent(tabId) {
                lifecycleContent.innerHTML = `
                    <h3 class="text-2xl font-bold mb-4">${sopData.lifecycle[tabId].title}</h3>
                    <div>${sopData.lifecycle[tabId].content}</div>`;
                
                lifecycleTabs.forEach(t => {
                    if(t.dataset.tab === tabId) {
                        t.classList.add('active-tab');
                    } else {
                        t.classList.remove('active-tab');
                    }
                });
            }

            lifecycleTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    showLifecycleContent(tab.dataset.tab);
                });
            });

            showLifecycleContent('booking');

            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            
            const mobileLinks = mobileMenu.querySelectorAll('a');
            mobileLinks.forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenu.classList.add('hidden');
                });
            });
            
            const sections = document.querySelectorAll('section');
            const navLinks = document.querySelectorAll('#desktop-nav a');
            window.onscroll = () => {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (pageYOffset >= sectionTop - 80) {
                        current = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active-nav');
                    if (link.getAttribute('href') === `#${current}`) {
                        link.classList.add('active-nav');
                    }
                });
            };

            const searchBar = document.getElementById('search-bar');
            const searchResultsContainer = document.getElementById('search-results');
            const mainContent = document.getElementById('main-content');

            searchBar.addEventListener('keyup', (e) => {
                const searchTerm = e.target.value.toLowerCase();

                if (searchTerm.length < 3) {
                    searchResultsContainer.innerHTML = '';
                    searchResultsContainer.classList.add('hidden');
                    mainContent.classList.remove('hidden');
                    return;
                }

                mainContent.classList.add('hidden');
                searchResultsContainer.classList.remove('hidden');
                searchResultsContainer.innerHTML = '';
                
                const results = [];

                const checkAndAdd = (item, category) => {
                    let contentToCheck = item.content || '';
                    let titleToCheck = item.title || '';
                    if (titleToCheck.toLowerCase().includes(searchTerm) || contentToCheck.toLowerCase().includes(searchTerm)) {
                        results.push({ category, title: titleToCheck, content: contentToCheck });
                    }
                };
                
                sopData.roles.forEach(item => checkAndAdd(item, 'Team & Roles'));
                sopData.conduct.forEach(item => checkAndAdd(item, 'Code of Conduct'));
                Object.values(sopData.lifecycle).forEach(item => checkAndAdd(item, 'Event Lifecycle'));
                sopData.vendors.forEach(item => checkAndAdd(item, 'Vendor Standards'));
                sopData.sanctions.forEach(item => checkAndAdd(item, 'Sanctions'));

                if(results.length > 0) {
                     results.forEach(result => {
                        const resultEl = document.createElement('div');
                        resultEl.className = 'card-bg p-6 rounded-lg shadow-md mb-4';
                        resultEl.innerHTML = `
                            <p class="text-sm font-semibold highlight mb-1">${result.category}</p>
                            <h3 class="text-xl font-bold mb-2">${result.title}</h3>
                            <div class="">${result.content.replace(new RegExp(searchTerm, 'gi'), (match) => `<mark class="bg-[#acbae0] bg-opacity-30">${match}</mark>`)}</div>
                        `;
                        searchResultsContainer.appendChild(resultEl);
                    });
                } else {
                     searchResultsContainer.innerHTML = `<p class="text-center">No results found for "${searchTerm}".</p>`;
                }
            });
        });
    </script>
</body>
</html>
